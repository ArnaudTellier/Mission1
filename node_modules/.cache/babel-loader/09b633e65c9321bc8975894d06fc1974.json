{"ast":null,"code":"import axios from \"../config/axios\";\nimport jwtDecode from \"\";\n\nconst register = (username, password, firstname, lastname) => {\n  return axios.post(\"inscription\", {\n    \"username\": username,\n    \"password\": password,\n    \"firstname\": firstname,\n    \"lastname\": lastname\n  });\n};\n\nconst logIn = (username, password) => {\n  return axios.post(\"login.php\", {\n    \"username\": username,\n    \"password\": password\n  }).then(response => response.data.token);\n};\n\nconst logOut = () => {\n  localStorage.removeItem(\"token\");\n};\n\nconst isAuthenticated = () => {\n  const token = localStorage.getItem(\"token\");\n\n  if (token) {\n    const payload = jwtDecode(token);\n    return payload.exp * 1000 > new Date().getTime();\n  }\n\n  return false;\n};\n\nexport default {\n  logIn,\n  logOut,\n  isAuthenticated,\n  register\n};","map":{"version":3,"sources":["C:/Users/arnau/Documents/Projets/afterwork/front/src/services/AuthAPI.js"],"names":["axios","jwtDecode","register","username","password","firstname","lastname","post","logIn","then","response","data","token","logOut","localStorage","removeItem","isAuthenticated","getItem","payload","exp","Date","getTime"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,iBAAlB;AACA,OAAOC,SAAP,MAAsB,EAAtB;;AAEA,MAAMC,QAAQ,GAAG,CAACC,QAAD,EAAUC,QAAV,EAAmBC,SAAnB,EAA6BC,QAA7B,KAA0C;AACvD,SAAON,KAAK,CACPO,IADE,CACG,aADH,EACkB;AAAC,gBAAWJ,QAAZ;AAAqB,gBAAWC,QAAhC;AAAyC,iBAAYC,SAArD;AAA+D,gBAAWC;AAA1E,GADlB,CAAP;AAEH,CAHD;;AAKA,MAAME,KAAK,GAAG,CAACL,QAAD,EAAUC,QAAV,KAAuB;AACjC,SAAOJ,KAAK,CACPO,IADE,CACG,WADH,EACe;AAAC,gBAAWJ,QAAZ;AAAqB,gBAAWC;AAAhC,GADf,EAEFK,IAFE,CAEGC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,CAAcC,KAF7B,CAAP;AAGH,CAJD;;AAMA,MAAMC,MAAM,GAAG,MAAM;AACjBC,EAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACH,CAFD;;AAKA,MAAMC,eAAe,GAAG,MAAM;AAC1B,QAAMJ,KAAK,GAAGE,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAd;;AACA,MAAIL,KAAJ,EAAW;AACP,UAAMM,OAAO,GAAGjB,SAAS,CAACW,KAAD,CAAzB;AACA,WAAOM,OAAO,CAACC,GAAR,GAAc,IAAd,GAAqB,IAAIC,IAAJ,GAAWC,OAAX,EAA5B;AACH;;AACD,SAAO,KAAP;AACH,CAPD;;AAWA,eAAe;AAAEb,EAAAA,KAAF;AAASK,EAAAA,MAAT;AAAiBG,EAAAA,eAAjB;AAAkCd,EAAAA;AAAlC,CAAf","sourcesContent":["import axios from \"../config/axios\";\r\nimport jwtDecode from \"\"\r\n\r\nconst register = (username,password,firstname,lastname) => {\r\n    return axios\r\n        .post(\"inscription\", {\"username\":username,\"password\":password,\"firstname\":firstname,\"lastname\":lastname})\r\n}\r\n\r\nconst logIn = (username,password) => {\r\n    return axios\r\n        .post(\"login.php\",{\"username\":username,\"password\":password})\r\n        .then(response => response.data.token);\r\n}\r\n\r\nconst logOut = () => {\r\n    localStorage.removeItem(\"token\");\r\n}\r\n\r\n\r\nconst isAuthenticated = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n        const payload = jwtDecode(token);\r\n        return payload.exp * 1000 > new Date().getTime();\r\n    }\r\n    return false;\r\n}\r\n\r\n\r\n\r\nexport default { logIn, logOut, isAuthenticated, register };"]},"metadata":{},"sourceType":"module"}